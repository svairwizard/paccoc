!function(){var e,t,n={2858:function(e){e.exports=function(e){if(Array.isArray(e))return e}},3646:function(e){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},6860:function(e){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},3884:function(e){e.exports=function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return n}},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},693:function(e,t,n){var o=n(9713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}},3038:function(e,t,n){var o=n(2858),r=n(3884),a=n(521);e.exports=function(e,t){return o(e)||r(e,t)||a()}},319:function(e,t,n){var o=n(3646),r=n(6860),a=n(8206);e.exports=function(e){return o(e)||r(e)||a()}},9779:function(e,t,n){"use strict";n.d(t,{XA:function(){return o},vR:function(){return r},Gm:function(){return a},Br:function(){return c},PI:function(){return i}});var o="cted",r="_ct_ids",a="call_s",c={NOT_FIND_SELECTOR:1},i={url:"https://gum.criteo.com/sync",c:391,r:2,j:"window.criteo_callback",cookieName:"calltouchCriteoUserId"}},4380:function(e,t,n){"use strict";function o(){var e;if(e||"undefined"==typeof XMLHttpRequest)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}else e=new XMLHttpRequest;return e}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{var c=Boolean(window.event&&window.event.target&&"A"===window.event.target.nodeName),i=Boolean(window.event&&(window.event.target&&"submit"===window.event.target.type||"submit"===window.event.type)),s=o(),l=t?"POST":"GET";s.open(l,e,!c&&!i&&!r),c||i||r||(s.timeout=6e4),a&&(s.withCredentials=!0);var u=null;return"POST"===l&&(s.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),s.setRequestHeader("Content-type","application/json"),u=JSON.stringify(t)),s.onreadystatechange=function(){4===s.readyState&&n&&"function"==typeof n&&(200===s.status?n(!0,s.response):0===s.status&&n(!1))},s.send(u),s}catch(e){console.log(e)}}n.d(t,{Qj:function(){return o},ZP:function(){return r}})},9413:function(e,t,n){"use strict";function o(e){var t=document.cookie.match("(?:^|; )"+e+"=([^;]*)");return t?decodeURIComponent(t[1]):null}n.d(t,{Z:function(){return o}})},3186:function(e,t,n){"use strict";n.d(t,{KS:function(){return o},mg:function(){return a},G3:function(){return c}});var o={frontBranch:"frontBranch",backBranch:"backBranch"},r=document.currentScript;function a(){return r&&r.src.split("/").slice(0,3).join("/")}function c(e){var t="mod.calltouch.ru";if("mod.calltouch.ru"===t){var n=r&&r.src.split("/")[2];n&&(t=n)}return t}},8337:function(e,t,n){"use strict";function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,(function(){return n.call(e,window.event)}))}n.d(t,{v:function(){return o}})},3621:function(e,t,n){var o={"./autoGoals/autoGoals":[9142,142],"./autoGoals/autoGoals.js":[9142,142],"./dataLayer/dataLayer":[7035,35],"./dataLayer/dataLayer.js":[7035,35],"./dom-observer/dom-observer":[7095,95],"./dom-observer/dom-observer.js":[7095,95],"./forms/forms":[5256,256],"./forms/forms.js":[5256,256],"./historyObserver/historyObserver":[6800,800],"./historyObserver/historyObserver.js":[6800,800],"./widgets/goalObserver":[16,16],"./widgets/goalObserver.js":[16,16],"./widgets/widgets":[7053,53],"./widgets/widgets.js":[7053,53]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=3621,e.exports=r}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.m=n,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return e+"."+{16:"d3a740dee49d5d320687",35:"4b41c71b997674208c14",53:"66c5e379ab53ab0bfdc1",95:"320955a586d5737aacee",142:"1760073eb1abf700a950",256:"3f03efafc79197973321",800:"4f36d81c25ea0e497e37"}[e]+".js"},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="calltouch-client:",r.l=function(n,o,a,c){if(e[n])e[n].push(o);else{var i,s;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+a){i=d;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+a),i.src=n),e[n]=[o];var f=function(t,o){i.onerror=i.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(o)})),t)return t(o)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://mod.calltouch.ru/",function(){var e={725:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(n,r){o=e[t]=[n,r]}));n.push(o[2]=a);var c=r.p+r.u(t),i=new Error;r.l(c,(function(n){if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+c+")",i.name="ChunkLoadError",i.type=a,i.request=c,o[1](i)}}),"chunk-"+t,t)}};var t=function(t,n){var o,a,c=n[0],i=n[1],s=n[2],l=0;if(c.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);s&&s(r)}for(t&&t(n);l<c.length;l++)a=c[l],r.o(e,a)&&e[a]&&e[a][0](),e[c[l]]=0},n=self.webpackChunkcalltouch_client=self.webpackChunkcalltouch_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var e=r(319),t=r.n(e),n=r(693),o=r.n(n),a=r(9713),c=r.n(a),i=document.currentScript;function s(){var e=i&&i.src;if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++)t[n]&&t[n].src&&(null!==t[n].src.match(/calltouch.(ru|net)\/init\.js/)||null!==t[n].src.match(/calltouch.(ru|net)\/init-min\.js/))&&(e=t[n].src);var o=(e?e.replace(/^.{1,}[(\)?]/,"").split("&"):[]).find((function(e){return-1!==e.indexOf("id")}));return o?o.replace(/id=/,""):""}var l=function(e){var n={};return{addNoDataQueueRecord:function(e,o,r){var a=e||o;n[a]||(n[a]=[]),n[a].push(e?[o].concat(t()(r)):t()(r))},clearNoDataQueue:function(o,r){var a=Object.keys(n);if(a.length)for(var c=0;c<a.length;c+=1){var i=a[c],s=r.includes(i);if(i===o||s){for(var l=void 0;l=n[i].shift();){var u,d;s?(u=window)[e].apply(u,[i].concat(t()(l))):(d=window)[e].apply(d,[i,l[0]].concat(t()(l.slice(1))))}delete n[i]}}}}};function u(){return(Number(new Date)+Math.random()).toString(16)}function d(e){return e.replace("www.","").split(".").length}function f(){var e=document.cookie.match(/(?:^|; )call_s=([^;]*)/g);if(!e)return null;var t=d(document.location.hostname),n=-1!==e.indexOf("<?>"),o=-1!==e.indexOf("___"),r=n?"|".concat(t,"<?>"):'"d":'.concat(t);o&&(r="|".concat(t,"___"));for(var a=0;a<e.length;a+=1){var c=e[a].replace("; call_s=","");if(n||o||(c=decodeURIComponent(c)),-1!==c.indexOf(r))return c;e[a]=c}return e[0]}var p=r(9413),h=r(3186);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,p.Z)("_ct"),r=f(),a=(0,p.Z)("_ct_debug_ip"),c=(0,p.Z)("_ct_client_global_id")||"",i=o?"_ct=".concat(o):"",l=r?"call_s=".concat(r):"",d=o?"".concat(i,"; ").concat(l):l,m=o?"":"&uniq_req_id=".concat(t),v=e.createElement("script"),g=(0,h.G3)(h.KS.backBranch),y=n.modId||s()||window._ct_mod_id;a&&(d="".concat(d,"; _ct_debug_ip=").concat(a)),v.type="text/javascript",v.async=!0;var b=-1!==n.integrationsString.indexOf(";;")?n.integrationsString.substr(0,n.integrationsString.length-1):n.integrationsString;return v.src="https://".concat(g,"/d_client_new.js?param;").concat(b,";ref").concat(encodeURIComponent(e.referrer),";url").concat(encodeURIComponent(e.URL),";cook").concat(encodeURIComponent(d),"&mod_id=").concat(y,"&script_session_id=").concat(u(),"&ctObject=").concat(n.ctObject).concat(m,"&ctClientGlobalId=").concat(c),n.onLoad&&(v.onload=n.onLoad.bind(null,y)),v}var v=function(e){var t=e.counters,n=e.loaded,r=e.checkIntegrations,a=e.integrationsToSend,c=e.calltouchObject,i=e.updateCookie,s=document.getElementsByTagName("script")[0],l=Date.now()+""+Math.floor(1e5*Math.random());r(t,!0);for(var u=window,d=0;d<t.length;d+=1){var f="",p=a[t[d]];p&&(f=p.join(";"));var h=m(u.document,l,{integrationsString:f.replace(/=/gi,""),modId:t[d],ctObject:c,onLoad:function(e){n=n.map((function(t){return t.counter===e?o()({},t,{isLoaded:!0}):t}))}});try{s.parentNode.insertBefore(h,s),p&&i(t[d],f)}catch(e){console.log(e)}}};function g(e){for(var t,n=document.getElementsByTagName("script"),o=[],r=(0,h.mg)(),a={widgets:[]},c=0;c<n.length;c++)n[c]&&n[c].src&&((r&&0===n[c].src.indexOf(r+"/d_client_new.js")||null!==n[c].src.match(/calltouch.(ru|net)\/d_client_new\.js/)||n[c].classList.contains("ct_script"))&&(o.push(n[c]),a.widgets.push(n[c].src)),e&&(r&&0===n[c].src.indexOf(r+"/init-widget.js")||null!==n[c].src.match(/calltouch.(ru|net)\/init-widget\.js/))&&o.push(n[c]));for(;t=o.shift();)t.remove();if(e){var i=document.querySelector("#CalltouchWidgetFrame");i&&i.remove()}return a}function y(){for(var e,t=(0,h.mg)(),n=document.getElementsByTagName("script"),o=[],r=0;r<n.length;r++)n[r]&&n[r].src&&0===n[r].src.indexOf(t)&&o.push(n[r]);for(;e=o.shift();)e.remove();var a=document.querySelector("#CalltouchWidgetFrame");a&&a.remove()}function b(){return window._ct_props_obj||(window._ct_props_obj={}),window._ct_props_obj}var _=document.currentScript,w=_&&_.src,I=b();function C(){var e;y(),I.scriptsList.forEach((function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","utf-8"),t.setAttribute("async",!0),t.setAttribute("src",e),(document.head||document.body).appendChild(t)})),window._ct_inits=[],window.ctw&&(window.ctw=void 0),e=window.CalltouchDataObject||"ct",window[e]=function(){window[e].callbacks.push(arguments)},window[e].callbacks=[],window[e].loaded=!1,window[e].counters=I.initCounters||[]}function k(){y(),window._ct_ws_c_h&&Object.values(window._ct_ws_c_h).forEach((function(e){"function"==typeof e&&e()}));var e=window.CalltouchDataObject||"ct";window[e]=function(){},window[e].callbacks=[],window[e].loaded=!1,window[e].counters=[]}function x(e){return{pathname:e.location.pathname,search:e.location.search,hash:e.location.pathname}}I.scriptsList||(I.scriptsList=[]),I.scriptsList.includes(w)||I.scriptsList.push(w);var O=b();O.instances||(O.instances={});var T,N=function(e){var t=e.window,n=e.observerMode,o=void 0===n?"any":n,r=e.minTimeout,a=void 0===r?0:r,c=e.singleInstance,i=e.onNavigate;c&&O.instances[c]&&O.instances[c]();var s=x(t),l=null;function u(){l&&clearTimeout(l),l=setTimeout((function(){if("any"===o)i();else{var e=s,n=(s=x(t)).pathname!==e.pathname,r=s.search!==e.search;("path"===o&&n||"query"===o&&(n||r))&&i()}}),a)}try{t.navigation.addEventListener("navigate",u),c&&(O.instances[c]=function(){t.navigation.removeEventListener("navigate",u)})}catch(e){}},S=function(e,t,n,o,r){var a=e[n.modId];if(a){var c=t.map((function(e){var t=a[e.patternType];if(!t)return{patternType:e.patternType,patternName:e.patternName,patternValue:void 0,error:"PatternType not found"};var n=t.find((function(t){return t[e.patternType]===e.patternName}));return n?{patternType:e.patternType,patternName:e.patternName,patternValue:n.value,error:null}:{patternType:e.patternType,patternName:e.patternName,patternValue:void 0,error:"PatternName not found"}}));o({siteId:n.siteId,modId:n.modId,fields:c})}else r({error:!0,errorText:"No params by modId found"})},j=(T={},function(){var e=[].slice.call(arguments),n=e[0],o=e[1],a=e[2],c=e.slice(3,e.length);if(T[o])return T[o].apply(T,[n,a].concat(t()(c)));r(3621)("./".concat(o,"/").concat(o)).then((function(e){return T[o]=e.default,T[o].apply(T,[n,a].concat(t()(c)))})).catch((function(e){console.log("Calltouch Error: ".concat(o," failed to load: "),e)}))}),P=j,E=r(4380);function A(e,t,n,r){try{var a=Boolean(window.event&&window.event.target&&"A"===window.event.target.nodeName),c=Boolean(window.event&&(window.event.target&&"submit"===window.event.target.type||"submit"===window.event.type)),i=(0,E.Qj)(),s=t?"POST":"GET";i.open(s,e,!a&&!c&&!r),a||c||r||(i.timeout=6e4),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){if(4===i.readyState&&n)if(200===i.status){var e=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}(i.response);e?e.data?n(!0,o()({},e.data)):e.error?n(!1,o()({},e.error)):n(!1,{type:"unknown_error",message:"Unknown JSON format",details:{}}):n(!1,{type:"unknown_error",message:"JSON parse error",details:{}})}else 0===i.status?n(!1,{type:"unknown_error",message:"Request timeout exceeded or connection reset",details:{}}):n(!1,{type:"unknown_error",message:"Unexpected HTTP code: ".concat(i.statusText),details:{}})},i.send(t)}catch(e){n&&n(!1,{type:"unknown_error",message:"Unexpected js exception",details:{}})}}var L=r(8337);function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Date,n=t.getFullYear(),o=t.getMonth(),r=t.getDate();return new Date(n+e,o,r)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=o()({},n)||{},c=a.expires;if(c&&"number"==typeof c){var i=new Date;i.setTime(1e3*c),a.expires=i.toUTCString()}c&&c.toUTCString&&(a.expires=c.toUTCString());var s=r?t:encodeURIComponent(t),l="".concat(e,"=").concat(s);for(var u in a)a[u]&&(l+="; ".concat(u,"=").concat(a[u]));l+="; path=/",document.cookie=l}function D(e,t,n){return new Promise((function(o,r){try{var a=B(5),c="ctClientGlobalId=".concat((0,p.Z)("_ct_client_global_id")||"","&domain=").concat(document.location.origin),i="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/global_cookie.php?").concat(c);(0,E.ZP)(i,null,(function(c,i){if(c&&i&&(R("_ct_client_global_id",i,{expires:a}),n&&e)){var s="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/set_external_data.php"),l={modId:t,siteId:n,sessionId:e,ctClientGlobalId:i};(0,E.ZP)(s,l,(function(e){e?o(i):r(null)}))}}),!1,!0)}catch(e){console.error("Calltouch error: ",e)}}))}var M=r(3038),G=r.n(M),Z=r(9779);function q(e){var t=e.modId,n=e.sessionId,o=e.endSessionTime,r=e.phones,a=e.domain,c=(0,p.Z)(Z.Gm),i=a?d(a):2;0===i&&(i=1);var s=Object.entries(r).map((function(e){var t=G()(e,2),n=t[0],o=t[1];return"".concat(n,":").concat(o.phoneId.toString())})).join("."),l={domain:a?".".concat(a):null,expires:o},u=function(e){R(Z.Gm,"___".concat(e,"___"),l,!0)},f="".concat(t,".").concat(o,".").concat(n,".").concat(s,"|").concat(i);if(!c||-1===c.indexOf("___")&&-1===c.indexOf("<?>"))if(c&&-1!==c.indexOf("<!>"))try{var h=JSON.parse(c.replace(/<!>/g,"")),m=Object.entries(h).filter((function(e){var n=G()(e,1)[0];return n!==t&&"d"!==n})).map((function(e){var t=G()(e,2),n=t[0],o=t[1].map((function(e,t){return t<2?e:Object.entries(e).map((function(e){var t=G()(e,2),n=t[0],o=t[1];return"".concat(n,":").concat(o)})).join(".")})).join(".");return"".concat(n,".").concat(o)}));m.push(f),u(m.join("|"))}catch(e){console.warn("Calltouch call cookie error: ",e)}else u(f);else{var v=(-1!==c.indexOf("___")?c.replace(/___/g,""):c.replace(/<\?>/g,"")).split("|").filter((function(e){return!e.startsWith(t)}));v.pop(),v.push(f),u(v.join("|"))}}var U="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/send_denial_event.php"),H=function(e){var t="".concat(U,"?siteId=").concat(e.siteId,"&sessionId=").concat(e.sessionId);(0,E.ZP)(t,null,(function(){}))};function K(e){var t=e.siteId,n=e.sessionId,o=e.modId,r=e.setBackendCookie,a=e.setCtCookie,c=e.setLkCookie,i=e.endSessionTime,s=e.phones,l=e.domain,u=e.denialTime,d=e.calltouchDnsHost,f=(e.calltouchObject,(0,p.Z)(Z.vR));if(f&&-1!==f.indexOf(o)){var m=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=o?decodeURIComponent(o):decodeURIComponent((0,p.Z)(Z.vR));if("null"===r)return{siteId:null,sessionId:null};for(var a=r.split("_"),c=0;c<a.length;c+=1){var i=a[c].split(":"),s=G()(i,3),l=s[0],u=s[1],d=s[2];if(l===e){t=d,n=u;break}}return{siteId:n,sessionId:t}}(o,f),v=m.sessionId;v!==n&&R(Z.vR,f.replace(v,n))}else R(Z.vR,f?f.concat("_".concat(o,":").concat(t,":").concat(n)):"".concat(o,":").concat(t,":").concat(n));if(R("_ct_session_id",n),R("_ct_site_id",t),d){var g=encodeURIComponent(a||(0,p.Z)("_ct_server")||(0,p.Z)("_ct")||""),y=window.location.protocol+"//"+d,b=(0,E.ZP)(y,{ct_server_value:g},null,!1,!0);b&&b.addEventListener("error",(function(){var e="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/calltouchdns_not_available.php");(0,E.ZP)(e,{site_id:t,calltouch_dns_host:d})}))}r&&q({modId:o,sessionId:n,endSessionTime:i,phones:s,domain:l}),a&&R("_ct",a,{expires:B(5)}),c&&R("_tolk",c,{domain:l}),u&&setTimeout(H.bind(null,{siteId:t,sessionId:n}),1e3*u)}var F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=null;return function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];if(n)e.apply(null,a);else{var i=function(){e.apply(null,a),o=null};o&&clearTimeout(o),o=setTimeout(i,t)}}}((function(e,t,n){var o="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/set_attrs.php");try{var r=t.siteId,a=t.sessionId,c=t.modId;if(e){var i={attrs:e,siteId:r,sessionId:a,modId:c};(0,E.ZP)(o,i,n||null,!1)}}catch(e){console.log(e)}}),1e3,!0),X=function(e){try{var t=(0,p.Z)(Z.PI.cookieName);if(!t&&document&&document.body){window.criteo_callback=function(t){t&&t.userid&&(R(Z.PI.cookieName,t.userid),F('{"mapped_user_id":"'.concat(t.userid,'","mapping_key":"').concat(Z.PI.c,'"}'),e))};var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="".concat(Z.PI.url,"?c=").concat(Z.PI.c,"&r=").concat(Z.PI.r,"&j=").concat(Z.PI.j),document.body.appendChild(n)}else F('{"mapped_user_id":"'.concat(t,'","mapping_key":"').concat(Z.PI.c,'"}'),e)}catch(e){console.log(e)}},J=null,Q=[],V=0;function W(){try{var e={},t=null,n=(o={},Q.forEach((function(e){var t=e.substr(2),n=(0,p.Z)("_ga_".concat(t));if(n){var r=n.split(".")[2];r.length>8&&(o[e]=r)}})),o);if(Object.keys(n).length&&(Object.entries(n).forEach((function(t){var n=G()(t,2),o=n[0],r=n[1];e["ga_user_id_".concat(o)]=r})),F(JSON.stringify(e),J),Q=Q.filter((function(e){return!n[e]})),e={},!Q.length))return;if("function"!=typeof window.gtag)return void(++V<=5&&setTimeout(W,5e3));Q.forEach((function(n){n&&window.gtag("get",n,"session_id",(function(o){try{if(!o)return;e["ga_user_id_".concat(n)]=o,t&&clearTimeout(t),t=setTimeout((function(){F(JSON.stringify(e),J),e={}}),1e3)}catch(e){console.log(e)}}))}))}catch(e){console.log(e)}var o}var $="_ct_dtg_sp",Y=null,z=0;function ee(){try{var e="",t=document.cookie.match("(?:^|; )_sp_id[^=]*=([^.^;]*)");if(t&&t[1]&&(e=decodeURIComponent(t[1])),!e)return void(++z<=5&&setTimeout(ee,5e3));F('{"datago_id":"'.concat(e,'"}'),Y,(function(e){if(e)try{window.localStorage.setItem($,String(Y.sessionId))}catch(e){}}))}catch(e){console.log(e)}}var te=function(e){try{if(window.localStorage.getItem($)===String(e.sessionId))return;Y=e,ee()}catch(e){console.log(e)}},ne=null,oe=null;function re(e,t){if(e&&t)try{var n=JSON.parse(t);if(!n||!n.id)return;var o="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/quiet_media_id.php?id=").concat(n.id,"&sessionId=").concat(ne,"&siteId=").concat(oe);(0,E.ZP)(o)}catch(e){console.log(e)}}var ae=function(e){try{ne=e.sessionId,oe=e.siteId,function(){try{(0,E.ZP)("https://const.uno/id.json?p=21",null,re)}catch(e){console.log(e)}}()}catch(e){console.log(e)}},ce=document.currentScript,ie=function(e,t){try{window._c_fields_init={sessionId:t.sessionId,siteId:t.siteId,extFields:e},(n=document.createElement("script")).async=!0,n.src="https://ab-ct.ru/fields.js?i=2",ce.after(n)}catch(e){console.log(e)}var n},se=function(e){if(e&&document&&document.body){var t=document.createElement("img");t.src=e,t.style.setProperty("display","none","important"),t.style.setProperty("width","0px","important"),t.style.setProperty("height","0px","important"),t.alt="",document.body.appendChild(t)}},le=[{id:"gc",name:"client_id",checkCookie:function(){var e=(0,p.Z)("_ga"),t=e?e.slice(6):null;return t?{id:this.id,integrationName:this.name,value:t}:null},searchRule:function(){var e=window.GoogleAnalyticsObject,t=e&&"string"==typeof e?window[e]:window.ga;if(t&&"function"==typeof t&&t.getAll){var n=t.getAll()[0],o=n?n.get("clientId"):null;if(o)return{id:this.id,integrationName:this.name,value:o}}return null}},{id:"yc",name:"ya_client_id",checkCookie:function(){var e=(0,p.Z)("_ym_uid");return e?{id:this.id,integrationName:this.name,value:e}:null},searchRule:function(){if(window.ym&&window.ym.a&&window.ym.a[0]){var e=window["yaCounter".concat(window.ym.a[0][0])];if(e&&e.getClientID)return{id:this.id,integrationName:this.name,value:e.getClientID()}}for(var t in window)if("y"===t[0]&&-1!==t.indexOf("yaCounter")&&window[t]&&window[t].getClientID)return{id:this.id,integrationName:this.name,value:window[t].getClientID()};return null}},{id:"cri",name:"client_ref_id",searchRule:function(){var e=window.location.search.split("&").find((function(e){return-1!==e.indexOf("client_ref_id")})),t=e&&e.replace(/(\?|(client_ref_id=))/gm,"");return t?{id:this.id,integrationName:this.name,value:t}:null}},{id:"fb",name:"fbp",checkCookie:function(){var e=(0,p.Z)("_fbp");return e?{id:this.id,integrationName:this.name,value:e}:null},searchRule:function(){return null}}];function ue(){var e=(0,p.Z)(Z.XA);return!e||-1!==e.indexOf("modId")&&-1===e.indexOf(":")?e?e.split("|"):[]:(R(Z.XA,""),[])}var de=function(){var e={},n={},r={};function a(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=ue(),a=[];n.forEach((function(n){e[n]||(e[n]=[]);var c=o?r.find((function(e){return-1!==e.indexOf(n)})):void 0;c?e[n]=t()(c.substr(c.indexOf(";")+1,c.length).split(";")):(a.length||le.forEach((function(e){var t=e.searchRule()||e.checkCookie&&e.checkCookie();t&&a.push("".concat(t.integrationName,"=").concat(t.value))})),e[n]=a.concat())}))}catch(e){console.error("Calltouch integrations error: ",e)}}function i(e,t){n[e]||(n[e]=[]),t.forEach((function(t){n[e].push(t)})),l(e,t.join(";"),!0)}function s(e){return e.map((function(e){var t=e.split(";"),n=[];return t.filter((function(e){var t=e.split("=")[0];return!(t&&n.includes(t)||(n.push(t),0))})).join(";")}))}function l(o,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r&&r.length)try{var c=(0,p.Z)(Z.XA),i=c&&c.length?c.split("|"):[],l=i.findIndex((function(e){return-1!==e.indexOf(o)})),u="modId=".concat(o,";").concat(r);-1!==l?i[l]=a?"".concat(i[l],";").concat(r):u:i.push(u);var d=s(i);R(Z.XA,d.join("|")),e[o]&&(n[o]=t()(e[o]),e[o].length=0)}catch(e){console.error("Calltouch integrations error: ",e)}}return{checkIntegrations:a,integrationsToSend:e,updateIntegrations:function t(s,l,u){var d=r[s]||1;if(d<=15){if(r[s]=d+1,a([s],!1),e[s]&&e[s].length)try{var f=[];if(e[s].forEach((function(e){(n[s]?n[s].find((function(t){return t===e})):void 0)||f.push(e)})),f.length>0&&u&&l){var p="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/set_external_data.php?id=").concat(s),m=f.reduce((function(e,t){var n=t.split("="),r=G()(n,2),a=r[0],i=r[1];return o()({},e,c()({},a,i))}),{}),v=o()({modId:s,siteId:u,sessionId:l},m);(0,E.ZP)(p,v,i.bind(null,s,f))}}catch(e){console.error("Calltouch integrations error: ",e)}window.setTimeout(t.bind(null,s,l,u),1e3)}},updateCookie:l}};function fe(e,t){if(3!==e.nodeType&&e.querySelector(t))return!0;for(var n=0,o=e.childNodes.length;n<o;n+=1)fe(e.childNodes[n],t)}function pe(e,t){if(e.innerHTML&&-1!==JSON.stringify(e.innerHTML).indexOf(t))return!0;for(var n=0,o=e.childNodes.length;n<o;n+=1)pe(e.childNodes[n],t)}var he=function(e){if(-1!==e.indexOf(":has")||-1!==e.indexOf(":contains")){var t=-1!==e.indexOf(":contains"),n=t?e.indexOf(":contains"):e.indexOf(":has"),o=-1!==e.substr(0,n).indexOf(":not("),r=document.querySelectorAll(":scope ".concat(e.substr(0,o?n-5:n))),a=e.substr(t?n+11:n+5,e.length).split(")")[0],c=e.substr(t?n+11+a.length+1:n+5+a.length+1,e.length);")"===c&&(c="");var i=[];return r.forEach((function(e){var n=t?pe(e,a.substr(0,a.length-1)):fe(e,a);if(!o&&n||o&&!n){var r=c&&c.length&&e.querySelectorAll(c);r?[].slice.call(r).forEach((function(e){i.push(e)})):i.push(e)}})),i}return document.querySelectorAll(":scope ".concat(e))},me={SCRIPT:1,LINK:1,IMG:1,SVG:1,PATH:1,STYLE:1,NOSCRIPT:1,IFRAME:1,INPUT:1,SELECT:1,OPTION:1,TEXTAREA:1,HEAD:1,META:1,TITLE:1},ve=/\d/i,ge=/\D/gi,ye={inCodeFirst:"\\s*",inCodeLast:"\\D*",betweenCodePhone:"\\D*",inPhone:"\\D*",after:"(?!@)",checkBefore:new RegExp("@\\d*$","i")},be={inPhone:"[^\\da-zа-я+,.]*",after:"(?!@|[^\\S\\r\\n]*\\d)",checkBefore:new RegExp("@$|\\d[^\\S\\r\\n]*$|(\\d\\s*){3,7}([^\\d\\s]\\s*){0,3}$","i")};function _e(e,t){!function(e,t){var n=document.createElement("textarea");for(var o=e.map((function(e){return{oldNumber:e.phone_code+e.phone_number,newNumber:e.value_code+e.value_phone,partialOldNumber:e.phone_code===e.value_code&&e.phone_number,partialNewNumber:e.phone_code===e.value_code&&e.value_phone}})),r=t.querySelectorAll("a"),a=function(e){var t=r[e],a=t.href;if(!a||"string"!=typeof a)return"continue";var c,i=-1===(c=decodeURI(a)).indexOf("&")?c:(n.innerHTML=c,n.value),s=i.toLowerCase().trim();if(-1===s.indexOf("tel:")&&-1===s.indexOf("callto:"))return"continue";var l=s.replace(ge,""),u=null;o.some((function(e){var t=l.indexOf(e.oldNumber),n=-1!==t;return n?u={digitIndex:t,old:e.oldNumber,new:e.newNumber}:e.partialOldNumber&&l===e.partialOldNumber&&(u={digitIndex:t,old:e.partialOldNumber,new:e.partialNewNumber},n=!0),n})),u&&(t.href=function(e,t,n,o){for(var r=e.split(""),a=0,c="",i=0,s=0;s<r.length;s++){var l=r[s];i<=t&&l.match(ve)&&i++,i>t&&a<n.length&&l===n[a]?(c+=o[a]||"",++a>=n.length&&a<o.length&&(c+=o.substring(a))):c+=l}return c}(i,u.digitIndex,u.old,u.new))},c=0;c<r.length;c++)a(c)}(e,t),function(e,t){for(var n,o=[],r=e.map((function(e){var t,n,r=e.phone_code.split(""),a=e.phone_number.split(""),c=e.value_code.split(""),i=e.value_phone.split(""),s=e.phone_code===e.value_code;t=r.length<=3?r.join(ye.inCodeFirst):r.slice(0,3).join(ye.inCodeFirst)+ye.inCodeLast+r.slice(3).join(ye.inCodeLast),t+=ye.betweenCodePhone+a.join(ye.inPhone)+ye.after,o.push(t),s&&(n=a.join(be.inPhone)+be.after,o.push(n));var l=a.length-i.length;if(l>0)for(var u=0;u<l;u++)i.unshift("");return{oldCodeChars:r,oldPhoneChars:a,newCodeChars:c,newPhoneChars:i,reFull:new RegExp(t,"i"),rePart:s&&new RegExp(n,"i")}})),a=new RegExp(o.join("|"),"ig"),c=[],i=[],s=document.createNodeIterator(t,NodeFilter.SHOW_TEXT);n=s.nextNode();)n.parentElement&&me[String(n.parentElement.tagName).toUpperCase()]||(c.push(n.textContent),i.push({node:n,oldText:n.textContent,newText:""}));for(var l,u=c.join(""),d=[],f=0,p=function(){var e=l[0],t=!0,n=r.find((function(n){var o=n.reFull,r=n.rePart;if(o.exec(e))return!u.slice(f,l.index).match(ye.checkBefore);var a=r&&r.exec(e);return!(!a||a[0]!==e||u.slice(f,l.index).match(be.checkBefore)||(t=!1,0))}));n&&(d.push({startIndex:l.index,phone:n,isFull:t}),f=a.lastIndex)};l=a.exec(u);)p();if(d.length){for(var h=0,m=d[h],v=0,g=0,y=i[g],b=0,_=!1,w=0,I=m.isFull;h<d.length&&g<i.length;){if(_){var C=I?m.phone.oldCodeChars:m.phone.oldPhoneChars,k=I?m.phone.newCodeChars:m.phone.newPhoneChars,x=C[v],O=y.oldText[b];if(O===x){var T=v;!I&&k.length>C.length&&(T=v+k.length-C.length,0===v&&(y.newText+=k.slice(0,T).join(""))),y.newText+=k[T]||"",v++}else y.newText+=O;if(C.length<=v&&(I?(C.length<k.length&&(y.newText+=k.slice(v).join("")),I=!1):(h++,_=!1,I=(m=d[h])&&m.isFull),v=0),b++,_&&b<y.oldText.length)continue}if(!_&&m){var N=m.startIndex-w;if(y.oldText.length>N){var S=y.oldText.slice(b,N);y.newText+=S,b=N,v=0,_=!0;continue}}y.newText&&b<y.oldText.length&&(y.newText+=y.oldText.slice(b)),w+=y.oldText.length,y=i[++g],b=0}for(var j=document.createElement("span"),P=0;P<i.length;P++){var E=i[P];E.newText&&(j.innerHTML=E.newText,E.node.textContent=j.textContent)}}}(e,t)}function we(e){!function(e){e.reduce((function(e,t){var n=t.selector;return(n&&"body"!==n?he(n):[document]).forEach((function(n){e.has(n)?e.get(n).push(t):e.set(n,[t])})),e}),new Map).forEach(_e)}(e)}var Ie=function(e,t){var n;function o(t){var o=!0,r=!1,a=void 0;try{for(var c,i=t[Symbol.iterator]();!(o=(c=i.next()).done);o=!0){var s=c.value;"childList"===s.type&&s.addedNodes.length&&(window.clearTimeout(n),n=window.setTimeout(we.bind(null,e.params),300))}}catch(e){r=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}}try{we(e.params),"complete"!==document.readyState&&(0,L.v)(window,"load",we.bind(null,e.params)),e.useObserver&&r.e(95).then(r.bind(r,7095)).then((function(e){e.default(o)})).catch((function(e){console.warn("Calltouch Error: MutationObserver failed to load: ",e)}))}catch(e){console.warn("Calltouch matcher error: ",e)}};function Ce(e,t){e&&e.innerHTML&&(e.innerHTML=t)}function ke(e,t){if(e){if(e.childNodes.length){var n="class"===t.type?e.querySelectorAll(".".concat(t.selector)):e.querySelector("#".concat(t.selector));n&&("class"===t.type?n.forEach((function(e){return Ce(e,t.value)})):Ce(n,t.value))}var o=e.classList,r=e.id;"class"===t.type&&o&&o.contains(t.selector)&&Ce(e,t.value),r&&e.getAttribute("id")===t.selector&&Ce(e,t.value)}}var xe=function(e){function t(t){var n=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var i=a.value;"childList"===i.type&&i.addedNodes.length&&i.addedNodes.forEach((function(t){ke(t,e)}))}}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}}if(e.selector&&e.selector.length)try{!function(e){if("class"===e.type){var t=document.querySelectorAll(".".concat(e.selector));t&&t.length&&t.forEach((function(t){Ce(t,e.value)}))}else{var n=document.querySelector("#".concat(e.selector));n&&Ce(n,e.value)}}(e),e.useObserver&&r.e(95).then(r.bind(r,7095)).then((function(e){e.default(t)})).catch((function(e){console.log("Calltouch Error: MutationObserver failed to load: ",e)}))}catch(e){console.log("Calltouch Error: ",e)}else console.log("Calltouch Error: selector cannot be empty")};r.p=function(){var e="mod.calltouch.ru",t="https://mod.calltouch.ru/";if(t.includes(e)){var n=document.currentScript,o=n&&n.src.split("/")[2];o&&(t=t.replace(e,o))}return t}();var Oe=b();!function(e,n){"function"!=typeof NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var r=e.CalltouchDataObject||"ct",a=!!e.CalltouchDataObject,i=a&&e[r].callbacks&&void 0===e[r].loaded;Oe.initCounters||(Oe.initCounters=e[r]&&e[r].counters||[]);var u,d,f,m,y,b,_,w={},I=[],x=[],O=[],T=n.URL,j=new Date,M=(0,p.Z)("_ct_server")||null,G=(0,p.Z)("_ct")||null;M&&G!==M&&(R("_ct",M,{expires:B(1)}),G=M);var Z=de(),U=Z.checkIntegrations,H=Z.integrationsToSend,F=Z.updateIntegrations,V=Z.updateCookie;if((!a||i||e[r]&&"boolean"==typeof e[r].loaded&&!e[r].loaded)&&(I=a?e[r].callbacks:[],(x=a&&!i?e[r].counters:[s()]).forEach((function(e){O.push({counter:e,isLoaded:!1})})),e[r]=function(){var a,p,I={},L={},B={},R=new Promise((function(e,t){a=e,p=t})),M=null;function Z(e,t){var n=Object.keys(I);if(0===n.length||!t)return{siteId:null,sessionId:null};var o=e?I[n[0]]||{}:I[t]||{};return{siteId:Number(o.siteId),sessionId:Number(o.sessionId)}}function $(e){u={},d={};var t={counters:x,loaded:O,checkIntegrations:U,integrationsToSend:H,calltouchObject:r,updateCookie:V};g(e),v(t)}function Y(e,t,n){var o,r=e&&"withSubPools"===e?Object.keys(I[t].phones||{}).filter((function(e){return I[t].phones[e].subPoolName.length>0})).map((function(e){return{subPoolId:e,subPoolName:I[t].phones[e].subPoolName,phoneNumber:I[t].phones[e].phoneNumber}})):void 0,a=r?"phonesAndSubpools":"phoneNumbers",i=r||Object.keys(I[t].phones||{}).filter((function(e){return I[t].phones[e].subPoolName.length>0})).map((function(e){return I[t].phones[e].phoneNumber}));return o={modId:t,siteId:I[t].siteId,sessionId:I[t].sessionId,ctClientId:I[t].ctClientId},c()(o,a,i),c()(o,"ctGlobalId",n),o}function z(e,t,n){if(t.callback&&"function"==typeof t.callback){var o=Array.isArray(e);t.callback(o,o?e.map((function(e){return{subPoolId:e.subPoolId,subPoolName:e.subPoolName,phoneNumber:e.phoneNumber}})):e)}Array.isArray(e)&&(e.forEach((function(e){I[n.modId].phones[e.subPoolId]={phoneId:e.phoneId,phoneNumber:e.phoneNumber,subPoolName:e.subPoolName,phoneBody:e.phoneBody,phoneCode:e.phoneCode}})),q({modId:n.modId,sessionId:n.sessionId,endSessionTime:I[n.modId].endSessionTime,phones:I[n.modId].phones,domain:I[n.modId].domain}))}var ee=l(r),ne=ee.addNoDataQueueRecord,oe=ee.clearNoDataQueue,re={create_session:function(e){var t=e.siteId,o=e.sessionId,c=e.modId,i=e.setCookie,s=e.endSessionTime,l=e.phones,u=e.domain,d=e.GA4,f=e.dataGoEnabled,h=e.quietMediaEnabled,m=e.setCtCookie,v=e.setLkCookie,g=e.denialTime,y=e.calltouchDnsHost,b=e.fields;w.session=e,K({siteId:t,sessionId:o,modId:c,setBackendCookie:i,setCtCookie:m,setLkCookie:v,endSessionTime:s,phones:l,domain:u,denialTime:g,calltouchDnsHost:y,calltouchObject:r}),G=m,T=n.URL,F(c,o,t),oe(c,Object.keys(re)),D(o,c,t).then((function(e){M=e,a()})).catch((function(e){console.error("Calltouch global cookie error: ",e),p()})),d&&d.length&&function(e,t){try{Q=e,J=t,W()}catch(e){console.log(e)}}(d,{siteId:t,sessionId:o,modId:c}),f&&te({siteId:t,sessionId:o,modId:c}),h&&ae({siteId:t,sessionId:o}),b&&ie(b,{siteId:t,sessionId:o})},session_data:function(e){var t=e.mod_id;t&&(L[t]=e,delete e.mod_id)},goal:function(){try{var e=[].slice.call(arguments),t=e[0],o="boolean"==typeof e[1]?e[1]:Boolean(B.goal)||Boolean(B.send_goal),r="boolean"==typeof e[1]?e[2]:e[1];j=new Date;var a=r.siteId,c=r.sessionId,i=r.modId;if("form.submit"===t){var s="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/auto_goal_event.php"),l={siteId:a,sessionId:c,goalTypeId:7,url:n.location.href};(0,E.ZP)(s,l,null,o)}else if(t){var u="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/goal_event.php"),d={goalAlias:t,siteId:a,sessionId:c,modId:i,url:n.location.href};(0,E.ZP)(u,d,null,o)}}catch(e){console.error("Calltouch goal error: ",e)}},set_attrs:function(){try{var e=[].slice.call(arguments),t=e[0],n="boolean"==typeof e[1]?e[1]:Boolean(B.set_attrs),o="boolean"==typeof e[1]?e[2]:e[1];j=new Date;var r="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/set_attrs.php"),a=o.siteId,c=o.sessionId,i=o.modId;if(t){var s={attrs:t,siteId:a,sessionId:c,modId:i};(0,E.ZP)(r,s,null,n)}}catch(e){console.error("Calltouch set_attrs error: ",e)}},send_ecommerce:function(){try{var e=[].slice.call(arguments),t=e[0],n=e[1],o="boolean"==typeof e[2]?e[2]:Boolean(B.send_ecommerce),r="boolean"==typeof e[2]?e[3]:e[2];j=new Date;var a=r.siteId,c=r.sessionId,i=r.modId,s=r.ctClientId,l="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/ecommerce.php");t&&"string"==typeof t||console.error("Calltouch eCommerce error: no type found"),"refund"===t||n&&n.products&&Array.isArray(n.products)&&0!==n.products.length||console.error("Calltouch eCommerce error: no products found"),a||console.error("Calltouch eCommerce error: no siteId found"),c||console.error("Calltouch eCommerce error: no sessionId found"),"refund"!==t&&"purchase"!==t||n&&n.id||console.error("Calltouch eCommerce error: no operation id found");var u=void 0;"purchase"===t&&n.manager&&n.manager.length&&(u=n.manager.length>50?n.manager.substr(0,50):n.manager);var d={siteId:a,sessionId:c,modId:i,ctClientId:s,eventType:t,id:n.id,products:n?n.products:[],manager:u,fio:n&&n.fio||null,email:n&&n.email||null,phoneNumber:n&&n.phoneNumber||null,comment:n&&n.comment||null,addTags:n&&n.addTags||[]};(0,E.ZP)(l,d,(function(){}),o)}catch(e){console.error("Calltouch send_ecommerce error: ",e)}},modules:function(){var e=arguments[1];return"isLoaded"===e&&void 0===P.apply(void 0,[r].concat(Array.prototype.slice.call(arguments)))?(P.apply(void 0,[r].concat(Array.prototype.slice.call(arguments))),!1):P.apply(void 0,[r].concat(Array.prototype.slice.call(arguments)))},init_criteo:function(e){X(e)},append_pixel:function(e){se(e)},calltracking_params:function(e,t,n){return n&&"withPromise"===n?new Promise((function(n){R.then((function(){var o="string"==typeof e&&I[e]?Y(t,e,M):Object.keys(I).map((function(e){return Y(t,e,M)}));n(o)})).catch((function(){var o="string"==typeof e&&I[e]?Y(t,e,null):Object.keys(I).map((function(e){return Y(t,e,null)}));n(o)}))})):"string"==typeof e&&I[e]?Y(t,e,M):Object.keys(I).map((function(e){return Y(t,e,M)}))},session_params:function(e){return L[e]},set_replacement_params:function(e,t){u||(u={},d={}),u[t.modId]=e.params,f=f?f>60*e.pool_time?60*e.pool_time:f:60*e.pool_time},calltracking_patterns:function(t,r){return new Promise((function(a,c){if(O.every((function(e){return e.isLoaded}))||c({error:!0,errorText:"Replacement is updating"}),(new Date-j)/1e3>f||n.URL!==T){u=void 0,j=new Date,O=O.map((function(e){return o()({},e,{isLoaded:!1})})),$(!1);var i=0,s=setInterval((function(){10!==(i+=1)||u&&(!u||u[r.modId])||(e.clearInterval(s),c({error:!0,errorText:"Could not fetch data"})),u&&u[r.modId]&&(e.clearInterval(s),S(u,t,r,a,c))}),300)}else u||c({error:!0,errorText:"No params found"}),S(u,t,r,a,c)}))},calltracking_replacement_params:function(e){return{params:u[e],replacementFlatParams:d}},destroy:function(){k()},reload:function(){$(!0)},renew:function(){C()},setSpaMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"path";N({window:e,observerMode:t,singleInstance:"spa",onNavigate:function(){C()}})},set_sync:function(e){try{e&&Array.isArray(e)&&e.forEach((function(e){B[e]=!0}))}catch(e){console.error("Calltouch set_sync error: ",e)}},get_widget_route_key_data:function(){try{var e=[].slice.call(arguments),t=e[0],o=e[1],r="boolean"==typeof e[2]?e[2]:Boolean(B.get_widget_route_key_data),a="boolean"==typeof e[2]?e[3]:e[2],c=1e6*Math.random(),i="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/callback_widget_user_form_find.php?siteId=").concat(a.siteId,"&routeKey=").concat(t,"&pageUrl=").concat(n.location.href,"&sessionId=").concat(a.sessionId);A("".concat(i,"&rand=").concat(Math.floor(c)),null,o,r)}catch(e){console.error("Calltouch get_route_key_data error: ",e)}},create_widget_request:function(){try{var e=[].slice.call(arguments),t=e[0],r="boolean"==typeof e[1]?e[1]:Boolean(B.create_widget_request),a="boolean"==typeof e[1]?e[2]:e[1],c=1e6*Math.random(),i=o()({siteId:a.siteId,sessionId:a.sessionId,workMode:1,pageUrl:n.location.href},t),s="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/callback_request_user_form_create.php?rand=").concat(Math.floor(c));A(s,JSON.stringify(i),t.callback,r)}catch(e){console.error("Calltouch create_request error: ",e)}},init_matcher_replacement:function(e,t){m=performance.now(),Ie(e),y=performance.now()},replace:function(e,t){b=performance.now(),xe(e),_=performance.now()},get_matcher_replacement_time:function(){return y&&m?y-m:"подмена не была запущена или время не удалось установить"},get_replacement_time:function(){return b&&_?_-b:"подмена не была запущена или время не удалось установить"},dynamic_replacement:function(e,t){!function(e,t,n){var o="".concat("https","://").concat((0,h.G3)(h.KS.backBranch),"/dynamic_replacement.php"),r={siteId:t.siteId,sessionId:t.sessionId},a=e.subPoolNamesContains?Array.isArray(e.subPoolNamesContains)?e.subPoolNamesContains:[e.subPoolNamesContains]:null;if(a&&a.length)r.subPoolNamesContains=a;else{var c=e.subPoolNames?Array.isArray(e.subPoolNames)?e.subPoolNames:[e.subPoolNames]:null;r.subPoolNames=c}(0,E.ZP)(o,r,(function(o,r){!o&&e.callback&&"function"==typeof e.callback?e.callback(!1,{type:"unknown_error"}):n(JSON.parse(r),e,t)}),!1)}(e,t,z)}};return function(){var e=[].slice.call(arguments);if("getSharedData"===e[0])return w;if("setSpaMode"===e[0])return re[e[0]](e[1]);var n=i&&e[0].method||re[e[0]],r=Object.keys(I),a=n?e[0].method||e[0]:e[1],l=n?e[0].args||e.slice(1):e.slice(2),u=n?r.length?r[0]:null:e[0];-1===u&&(u=r[0]||s());var d=Z(n,u),f=d.siteId,p=d.sessionId;if("create_session"===a){var h=Object.keys(l[0].phones).reduce((function(e,t){return l[0].phones[t].subPoolName?o()({},e,c()({},t,l[0].phones[t])):e}),{});I[l[0].modId]={siteId:l[0].siteId,sessionId:l[0].sessionId,endSessionTime:l[0].endSessionTime,domain:l[0].domain,ctClientId:l[0].setCtCookie,phones:h},re[a].apply(re,t()(l))}else{if("modules"===a&&("widgets"===l[0]||"forms"===l[0]||"dataLayer"===l[0]))return re[a].apply(re,t()(l).concat([{modId:u,siteId:f,sessionId:p,ctClientId:G}]));if(f&&p)return re[a].apply(re,t()(l).concat([{modId:u,siteId:f,sessionId:p,ctClientId:G}]));ne(u,a,l)}}}(),function(){var n;if(I&&I.length)for(;n=I.shift();)e[r].apply(e,t()([].slice.call(n)))}()),e.ct_create_session=function(t){e[r]("create_session",t)},e.ct_goal=function(t){e[r]("goal",t)},e.ct_set_attrs=function(t){e[r]("set_attrs",t)},x&&x.length>0){var $={counters:x,loaded:O,checkIntegrations:U,integrationsToSend:H,calltouchObject:r,updateCookie:V};"interactive"===n.readyState||"complete"===n.readyState?v($):(0,L.v)(n,"DOMContentLoaded",v.bind(null,$))}}(window,document)}()}();